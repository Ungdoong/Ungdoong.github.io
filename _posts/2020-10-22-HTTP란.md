## 서론

 HTTP 통신을 생각없이 사용하고는 있었지만, 실제 구성방법과 동작방식에 대해서는 정확히 알지 못했기 때문에, 공부하며 정리해보았습니다.



## 들어가기에 앞서

HTTP에 대한 이해를 위해 **TCP/IP(Transmission Control Protocol/Internet Protocol)**을 알아야 합니다. HTTP가 TCP/IP를 이용한 응용 프로토콜이기 때문이죠! 

**TCP/IP**란 TCP규약과 IP규약을 합친 웹 상에서만 사용하는 규약을 의미합니다.

### TCP

**TCP**는 데이터 전달을 관리합니다. 데이터를 나누어 한쪽에서 다른 쪽으로 옮기고, 이를 다시 조립하여 원래의 데이터로 만드는 규칙입니다. TCP 통신에서 데이터 단위는 **패킷**이며 TCP는 패킷을 조립하고, 손실된 패킷을 확인하며, 재전송하도록 요청합니다. 이는 4계층인 **전송 계층(Transport Layer)**에서 이루어집니다.

### IP

**IP**는 인터넷상의 주소 규칙입니다. $2^8 * 4$자리 주소인 **IPv4**를 사용하였지만, 주소가 고갈이 되고 있어 $16^4 * 8 $자리인 **IPv6**로 전환하고 있습니다.



## HTTP가 뭐죠?

HTTP(Hyper Text Transfer Protocol) - 인터넷에서 데이터를 주고 받을 수 있는 프로토콜

모든 프로그램이 HTTP 규약에 맞춰 개발함으로써 서로 정보를 교환할 수 있습니다!



## HTTP의 동작

클라이언트에서 요청(Request)하면 서버에서는 해당 요청사항에 맞는 결과를 찾아 클라이언트에게 응답(Response)하는 형태로 동작합니다

HTTP 통신은 HTML 문서 뿐만아니라 Plain text, JSON, XML과 같은 형태의 정보도 주고 받을 수 있으며, 보통 클라이언트가 어떠한 형태로 정보를 받고 싶은지 명시해주는 경우가 많습니다.

![제목 없음](https://user-images.githubusercontent.com/41600558/96946161-846cfc00-151a-11eb-9c1b-19189f5c9745.png)



## HTTP의 특징

- TCP/IP를 이용하는 응용 프로토콜

- 연결 상태를 유지하지 않는 비연결성 프로토콜

  (비연결성으로 인해 발생하는 단점을 해결하기 위해 Cookie와 Session이 존재)

- 요청/응답 방식으로 동작

> **Stateless Protocol**
>
> : 과거에 교환했던 리퀘스트와 리스폰스의 상태를 관리하지 않음
>
> 단점
>
> - 인증이 필요한 웹페이지에서 인증 후 새로운 페이지로 이동시 재인증 또는 요청마다 매개 변수나 추가정보를 붙여 로그인 상태를 관리해야함
>
> 장점
>
> - 서버의 리소스 소비를 줄일 수 있음
> - 프로토콜이 단순해져 범용성 증가



## HTTP 메시지

HTTP에서 교환하는 정보로써 요청시 **Request Message**, 응답시 **Response Message**라고 합니다.

**메시지 헤더**와 **메시지 바디**로 크게 구분되며 **개행문자(CR+LF)**로 이를 구분합니다.



## 요청(Request)

 **클라이언트가 서버에게 연락하는 것**으로 요청에 대한 정보를 담아 서버로 보냄

### 종류

- **GET** : 자료를 **요청**
- **POST** : 자료의 **생성**을 요청
- **PUT** : 자료의 **수정**을 요청
- **DELETE** : 자료의 **삭제**를 요청

### Request HTTP 메시지 예시

```http
GET htttps://www.naver.com/ HTTP/1.1
user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36
upgrade-insecure-requests: 1

<본문 없음>
```

`GET htttps://www.naver.com/ HTTP/1.1` 는 `<메서드> <구조> <버전>` 의 형식입니다.

`user-agent`와 `upgrade-insecure-requests`등은 헤더이며 **요청에 대한 정보**를 담고 있습니다.

**본문**은 **요청할 때 함께 보낼 데이터를 담는 부분**으로 GET 요청은 따로 데이터를 담지 않기 때문에 본문이 존재하지 않습니다.



## 응답(Response)

**서버가 요청에 대한 답변을 클라이언트에게 보내는 것**

### 상태코드(Status Code)

- 1XX(조건부 응답) : 요청을 받았으며 작업을 계속
- 2XX(성공) : 클라이언트가 요청한 동작을 수신하여 이해했고 승낙했으며 성공적으로 처리
- 3XX(리다이렉션 완료) : 클라이언트는 요청을 마치기 위해 추가 동작을 취해야 함
- 4XX(요청 오류) : 클라이언트에 오류가 있음
- 5XX(서버 오류) : 서버가 유효한 요청을 명백하게 수행하지 못함

### Response HTTP 메시지 예시

```
HTTP/1.1 200 OK
Connection: keep-alive
Content-Encoding: gzip												 
Content-Type: text/html; charset=UTF-8
```



## HTTP Encoding

 HTTP로 데이터를 전송할 때 **인코딩(변환)**을 실시함으로써 전송 효율을 높일 수 있습니다. 이는 **다량의 액세스를 효율적으로 처리**할 수 있도록 하지만, 인코딩에 의한 **CPU 등의 리소스를 더 소비**합니다.

**Encoding**은 **Entity Body**에 대하여 이루어집니다.

### 엔티티(Entity)

페이로드(payload, 부가물)로 전송되는 정보로써 엔티티 헤더 필드와 엔티티 바디로 구성됩니다.

 HTTP **메시지 바디**는 **엔티티 바디**를 운반하는 역할을 합니다. 본래 둘은 같은 부분으로 여기지만 엔티티 바디에 인코딩이 적용되면 엔티티 바디의 내용이 변하므로 구분됩니다.



## 마치며

HTTP에 대하여 이해한 개념에 대하여 정리하였습니다. 이후 HTTPS의 개념과 동작원리, SSL 인증 원리 에 대하여 정리하겠습니다.
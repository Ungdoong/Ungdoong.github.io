## DBMS란?

> **DBMS(Database Management System)**란 사용자와 데이터베이스 사이에서 사용자의 요구에 따라 정보를 생성해주고, 데이터베이스를 관리해주는 **소프트웨어**

## 관계형 DB vs NoSQL DB

> **관계형 데이터 베이스**
>
> 가장 대표적인 데이터베이스 시스템
>
> 행(Column)과 열(Row)로 표현되는 테이블간의 관계를 나타낼 때 사용되며, 질의어(SQL)을 통해 관리 및 접근
>
> ex) MySQL, Oracle. SQLite 등
>
> **SQLite(Opensource)**
>
> 로컬에서 사용하는 경량 데이터베이스
>
> 원격 Connection이 발생하지 않으므로 속도가 매우 빠름(주로 모바일이나 웹에서 사용)

> **NoSQL(Not Only SQL)**
>
> 관계형 데이터베이스보다 덜 제한적인 일관성 모델을 이용 => 특정 데이터 모델에 대해 특정 목적에 맞추어 구축되는 데이터베이스
>
> 키(key)와 값(value) 형태로 저장하고, 키를 사용해 데이터 관리 및 접근
>
> ex) 키-밸류형 : Redis, 문서형 : MongoDB 등



### 비교

> **용어**
>
> 테이블(Table) → 컬렉션(Collection), 레코드(Record) → 문서(Documents)(JSON 형태)
>
> **데이터 입력**
>
> 서로 다른 형태의 데이터를 같은 컬렉션에 추가 가능
>
> ![nosql2](https://user-images.githubusercontent.com/41600558/94100810-71a6cf00-fe69-11ea-883f-3bfbf6d268fa.png)
>
> 조인을 사용하지 않음 → 컬렉션마다 데이터를 복제하여 각 컬렉션 일부분에 속하는 데이터를 생성
>
> ![nosql](https://user-images.githubusercontent.com/41600558/94100705-37d5c880-fe69-11ea-8d13-096a5c74505e.png)
>
> **스케일링**
>
> > **수직확장**
> >
> > 단순히 데이터베이스 서버의 성능을 향상시키는 것
> >
> > **수평확장 - NoSQL에서만 지원**
> >
> > 더 많은 서버가 추가되고 데이터베이스가 전체적으로 분산되는 것
> >
> > ![nosql3](https://user-images.githubusercontent.com/41600558/94101043-09a4b880-fe6a-11ea-834b-fba977539510.png)
> >
> > **+) 샤딩(Sharding)**
> >
> > - 같은 테이블 스키마를 가진 데이터를 다수의 데이터베이스에 분산하여 저장하는 방법
> > - 복잡도 증가로 인해 가능하면 Sharding을 피하거나 지연시킬 수 있는 방법을 찾는 것이 우선되어야 함
> > - 균일하게 분산시킬 방법과 데이터를 탐색하는 방법에 대한 고려 필요
> >
> > ![5](https://user-images.githubusercontent.com/41600558/94101213-6a33f580-fe6a-11ea-864f-c069dc7bc1be.png)

### 언제 무엇을 사용하여야 할까?

> ### SQL
>
> - 앱의 여러 부분에 걸쳐 관련 데이터가 비교적 자주 변경되는 경우
> - 명확한 스키마가 요구되며, 데이터구조가 극적으로 변경되지 않을 경우
>
> ### NoSQL
>
> - 정확한 요구사항을 알 수가 없거나 관계를 맺고 있는 데이터가 자주 변경되는 경우
> - 읽기(read)가 자주 발생하지만, 데이터는 자주 변경하지 않는 경우
> - 데이터베이스를 수평으로 확장해야 하는 경우(즉, 막대양 양의 데이터를 다뤄야 하는 경우, 읽기/쓰기 처리량이 큰 경우)



## PK, FK, ER?

### Primary Key

관계형 DB에서 레코드(튜플)의 식별자로 이용하기에 가장 적합한 것을 후보키 중에 선택한 것

### Foreign Key

관계형 DB에서 한 테이블의 키 중 다른 테이블의 튜플을 식별할 수 있는 키

- 데이터의 중복을 방지하기 위해 사용

- 참조 무결성

  외래키 값은 NULL이거나 참조 테이블(릴레이션)의 기본키(PK) 값과 동일해야 한다

### ER-Model

관계형 DB와 같은 데이터 관리 시스템 상의 구조적인 데이터를 기술하는 것

개체(Entity)와 관계(Relationship)을 이용해 현실에서의 데이터 세계를 개념적으로 표현



## 정규화

데이터베이스에서 이상 현상과 중복을 방지하기 위해 여러 개의 릴레이션으로 분해하는 과정

- 데이터 구조의 안정성 최대화
- 효과적인 검색 알고리즘

> **제1정규화**
>
> 원자성 확보
>
> ### 제2정규화
>
> 모든 테이블의 속성이 기본키 전부에 종속되어야 함(완전 종속). 부분 종속 X
>
> ex) (종업원, 기술)(기본키), 근무지 의 column이 있는 테이블에서 근무지가 종업원에 의해 값이 결정될 수 있으면 부분 종속이다
>
> ![99254B345BD9A22E11](https://user-images.githubusercontent.com/41600558/94103014-73bf5c80-fe6e-11ea-85ab-c0b0b3071f7c.png)
>
> ### 제3정규화
>
> 이행 함수 종속 제거
>
> A 값을 알면 B값을 알고, B값을 알면 C값을 알 수 있다면 이를 이행적 함수종속관계라 한다
>
> ![9974AB4E5BD9AB0A1E](https://user-images.githubusercontent.com/41600558/94103038-820d7880-fe6e-11ea-96c0-1c292436fcfa.png)



## 인덱스(Index)란?

테이블에 대한 동작 속도를 높여주는 자료 구조

- 1개 또는 여러 개의 컬럼을 이용하여 생성 가능
- 키-필드 구조

테이블을 정렬하고 인덱스 테이블의 각 레코드는 중복된 값이 시작되는 위치를 값으로 가짐

![index](https://user-images.githubusercontent.com/41600558/94103814-7327c580-fe70-11ea-80c8-c97367bbc7d6.png)

### 왜 사용할까?

- 테이블의 풀 스캔을 방지

### 언제 사용할까?

- 데이터 양이 많고 검색이 변경보다 빈번한 경우
- 인덱스를 걸고자 하는 필드의 값이 다양한 값을 가지는 경우



## 뷰(View)란?

하나 이상의 기본 테이블에서 유도한 가상 테이블로서, 사용자에게 접근이 허용된 자료만을 제한적으로 보여줌

- 물리적으로 존재하지는 않으나 사용자에게 물리적으로 존재하는 것처럼 간주됨
- 데이터 보정작업, 처리과정 시험 등 임시 작업을 위한 용도로 활용가능
- 조인문의 사용 최소화로 사용상의 편의성을 최대화

### 특징

- 기본 테이블과 같이 조작 가능
- 필요한 데이터만 뷰로 정의하여 처리함으로써 관리가 용이하고 명령문이 간단해짐
- 뷰를 통해서만 데이터에 접근하면 뷰에 나타나지 않는 데이터를 안전하게 보호 가능
- 기본키를 포함하여 구성하여야만 삽입, 삭제, 갱신, 연산 가능
- 정의된 뷰는 다른 뷰의 정의에 기초가 될 수 있음(기초가 된 뷰가 삭제되면 파생된 뷰도 삭제됨)

### 단점

- 독립적인 인덱스 사용불가
- 정의 변경 불가 = ALTER VIEW 사용불가
- 뷰로 구성된 내용에 대한 삽입, 삭제, 갱신, 연산에 제약 발생



## COMMIT & ROLLBACK

> **COMMIT**
>
> 모든 작업을 정상적으로 처리하겠다고 확정하는 명령어
>
> 트랜잭션 처리를 통해 변경된 내용들을 모두 영구 저장하는 명령어이며, 하나의 트랜잭션 과정이 종료됨

![1](https://user-images.githubusercontent.com/41600558/94093545-67300980-fe58-11ea-924b-a7e07c1da396.png)

> **ROLLBACK**
>
> 작업 중 문제가 발생했을 때, 트랜잭션의 처리 과정 중 발생한 변경 사항을 되돌리고, 트랜잭션 과정을 종료시키는 명령어
>
> 하나의 트랜잭션 처리가 시작되기 이전의 상태로 되돌림

![2](https://user-images.githubusercontent.com/41600558/94093660-b5dda380-fe58-11ea-8a14-53adc15c025a.png)


# 191222(Sun)\_프로세스\_스케줄링

## 개요

______________

한 프로세스를 실행 가능한 시점까지 실행하고, I/O 등 CPU를 사용하지 않는 작업을 할 때는 다른 프로세스를 실행

이러한 아이디를 프로세스 스케줄링(Process Scheduling)이라는 기술로 구현



## 프로세스 상태(Process State)

_______________

운영체제는 준비 큐(Ready Queue), 대기 큐(Waiting Queue) 등의 자료구조를 두어 이들 프로세스를 관리

- 생성
- 준비
- 대기
- 실행
- 종료



## 선점(Preemptive)과 비선점(non-preemptive)

____________________

프로세스 스케줄링은 다음 네 가지 경우에 발생

- 프로세스가 실행 상태(running)에서 대기 상태(waiting)으로 전환될 때
- 프로세스가 실행 상태(running)에서 준비 상태(ready)로 전환될 때
- 프로세스가 대기 상태(waiting)에서 준비 상태(ready)로 전환될 때
- 프로세스가 종료되었을 때(terminated)

### 비선점(non-preemptive | cooperative) 스케줄링

- 위의 첫 번째와 네 번째에서 일어남
- Context Switch가 발생하지 않음

### 선점(preemptive) 스케줄링

- 위의 네 가지 경우가 모두 일어남
- 프로세스 간 공유 자원에 대한 문제가 발생할 수 있음



## 스케줄링 알고리즘

__________________

다음번 실행될 프로세스를 정하는 방법과 그 기준 및 분류

### 분류

스케줄러를 최적화하기 하기위한 특징적인 세 가지 환경

1. 배치 - 비선점 또는 프로세스에게 긴 주기를 제공하는 선점

   - 시간당 처리되는 작업 수 최대화
   - 작업의 제출부터 종료까지 걸리는 시간 최소화
   - CPU가 항상 활용되도록 함

2. 대화식 - 다른 사용자의 사용을 방해하지 않기 위해 선점 필수

   - 요청에 빠르게 응답하여야 함

3. 실시간 - 프로세스들이 자신이 실행을 오랫동안 할수 없다는 점을 알고 있음 -> 선점이 필요하지 않을 수 있음

   - 데이터 손실 방지 및 품질 저하 방지

   - 당장 필요한 응용을 진행시키는데 필요한 프로그램만을 실행
   - but, 대화식은 범용이며 협동적이지 않고 경우에 따라 악의적인 임의의 프로그램도 실행
   - 경성 실시간(hard real-time)과 연성 실시간(soft real-time) 존재

### 효용성 판별 기준

- CPU 이용률(CPU utilization)
- 처리율(Throughput) - 단위시간당 얼마나 많은 프로세스들이 완료
- 소요시간(Thunaroun time) 
- 대기시간(Waiting time) - 대기 큐에서 기다리는 시간의 합
- 반응시간(Response time) - 프로세스가 요청된 후 첫 번째 응답을 받기까지 걸리는 시간

### FCFS 스케줄링(First Come First Serve Scheduling)

CPU를 먼저 요청한 프로세스가 먼저 CPU를 배정받음.

- 비선점 스케줄링 방식
- 큐를 이용하여 구현
- 프로세스가 들어오는 순서에 따라서만 결과가 바뀌므로 비효율적 - 대기시간이 너무 길어질 수 있음
- convey effect - 다른 모든 프로세스들이 커다란 한 프로세스가 끝날 때까지 계속 기다리는 현상

### SJF 스케줄링(Shortest Job First Scheduling)

CPU burst time이 작은 프로세스부터 먼저 점유

- 비선점
- 선점 SJF 스케줄링을 SRTF 스케줄링(Shortest Remaining Time First Scheduling)이라고도 함
- CPU burst time을 예측하기가 어려움

### HRN(Highest Response-ratio Next)

대기시간과 서비스 시간을 이용. `우선순위 = (대기시간+서비스시간)/서비스시간` 의 공식을 이용하여 우선순위 계산

### 우선순위  스케줄링(Priority Scheduling)

우선순위가 높은 프로세스를 먼저 스케줄링

- 선점 또는 비선점
- 우선순위를 어떻게 매기느냐에 따라 FCFS 또는 SJF와 같이질 수 있음
- 프로세스의 어떤 의미(semantic)에 따라 우선순위를 줌
- Internal 우선순위
  - 시간 제한, 메모리 요구량, 열린 파일의 수, 평균 I/O burst비율, 평균 CPU burst 비율 등
- External 우선순위
  - 프로세스의 중요도, 자원의 유형이나 들어가는 자원의 비용, 사용자 선호도 등
- 기아상태(Starvation)가 발생할 수 있음
  - Aging으로 해결

### RR 스케줄링(Roung Robin Scheduling)

시분할 시스템을 위해 설계된 선점형 스케줄링의 하나

프로세스들 사이에 우선순위를 두지 않고, 순서대로 시간단위(Time Quantum/Slice)로 CPU를 할당

- 보통 10ms ~ 100ms 정도
- Context Switching 오버헤드가 크지만 응답시간이 짧아짐

### MQ 스케줄링(Multilevel Queue Scheduling)

프로세스를 특정 그룹으로 분류할 수 있을 경우 그룹에 따라 각기 다른 준비 상태 큐를 사용

- 스케줄러의 갯수 = 큐의 수 + 큐간의 스케줄링에 필요한 스케줄러(1)

### MFQ 스케줄링(Multilevel Feedback Queue Scheduling)

기아현상 방지목적. MQ와의 가장큰 차이는 `큐사이의 프로세스 이동`

- 기본적으로 가장 우선순위가 낮은 큐를 제외하고는 RR스케줄링 사용
- 우선순위가 높은 큐일수록 짧은 Time Slice를 주고 해당 시간동안 실행이 끝나지 않으면 한단계 낮은 우선순위 부여
- 일정시간동안 실행되지 못하고 남아 있는 프로세스는 한단계 높은 큐로 보냄
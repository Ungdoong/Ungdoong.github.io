# 191211(Wed)_프로세스,쓰레드

## 프로세스

________________

### 개념

- 프로그램 - 저장장치에 저장되어 있는 정적인 상태
- 프로세스 - 실행을 위해 프로그램이 메모리에 적재된 동적인 상태

### 프로그램 → 프로세스

프로그램이 프로세스가 된다는 것은 OS로부터 PCB를 획득하는 것

- 프로세스 제어 블록(PCB)

  운영체제가 해당 프로세스를 위해 관리하는 자료 구조. PCB는 커널 스택의 처음에 위치

  - 프로세스 구분자 : 각 프로세스를 구분하는 구분자(PID)
  - 메모리 관련 정보 : 프로세스 메모리 위치 정보
  - 각종 중간값 ; 프로세스가 사용했던 중간값
  - 프로세스 상태, PC 레지스터, CPU 레지스터 및 일반 레지스터, CPU 스케줄링 정보

### 프로세스의 상태

- 생성

  프로세스가 메모리에 올라와 실행 준비를 완료

- 준비

  생성된 프로세스가 CPU를 얻을 때까지 대기하는 상태(PCB 획득)

- 실행

  CPU를 얻어 실제 작업을 수행하는 상태(dispatch(PID) → exit(PID) / block(PID) / timeout(PID))

  - 문맥교환(Context Switching)이 일어남

- 완료

  주어진 시간 동안 작업을 마치면 진입하는 상태(PCB가 사라진 상태)(exit(PID))

  - 비정상적 종료
    - 코어 덤프(core dump) - 디버깅을 위해 종료 직전 메모리 상태를 저장장치로 옮기는 것

- 대기

  입출력 요청상태(block(PID) → wakeup(PID)

- 휴식

  프로세스가 작업을 일시적으로 쉬고 있는 상태

- 보류

  프로세스가 메모리에서 잠시 쫓겨난 상태

  - 메모리가 꽉 차서 쫓겨남
  - 프로그램 오류로 실행을 보류해야함
  - 악의적인 공격이라 판단된 경우
  - 매우 긴 주기로 반복되는 프로세스라 메모리 밖에으로 보내도 상관없을 경우
  - 입출력을 기다리는 프로세스의 입출력이 계속 지연될 때

- 디스패치

  준비 상태의 프로세스 중 하나를 골라 실행 상태로 바꾸는 CPU 스케줄러의 작업

- 타임아웃

  프로세스가 주어진 시간 내 작업을 끝내지 못하면 준비상태로 돌아가는 것

## 

## 프로세스의 생성과 복사

______________

### fork() 시스템 호출

실행 중인 프로세스로부터 새로운 프로세스를 복사하는 함수

- PCB에서 변경되는 부분
  - 프로세스 구분자(PID)
  - 메모리 관련 정보
  - 부모 PID와 자식 PID
- 장점
  - 프로세스의 생성 속도 빠름
  - 추가 작업 없이 자원 상속 가능
  - 시스템 관리가 효율적

### exec() 시스템 호출

기존의 프로세스를 새로운 프로세스로 전환(재사용)하는 함수

- 코드 영역
  - 기존 내용을 지우고 새로운 코드로 변경
- 데이터 영역
  - 새로운 변수로 채워짐
- 스택 영역
  - 리셋
- PCB
  - PC 레지스터 값을 포함한 각종 레지스터와 사용한 파일정보 리셋



## 프로세스 계층 구조

______________

### 계층 구조의 장점

- 여러 작업을 동시에 처리 가능
- 프로세스의 재사용이 용이
- 자원회수가 쉬움
  - 프로세스 간 책임 관계가 분명해져 시스템을 관리하기가 수월



## 미아 프로세스

____________________

 프로세스가 종료된 후에도 비정상적으로 남아 있는 프로세스



## 쓰레드

______________________

CPU 스케줄러가 CPU에 전달하는 일의 단위

- 운영체제 입장에서의 작업 단위는 프로세스
- CPU 입장에서의 작업 단위는 쓰레드



### 멀티스레드

 프로세스 내 작업을 여러 개의 스레드로 분할함으로써 작업의 부담을 줄이는 프로세스 운영 기법

- 장점
  - 응답성 향상
  - 자원 공유
  - 효율성 향상
  - 다중 CPU 지원

### 멀티태스킹

 OS가 CPU에 작업을 줄 때 시간을 잘게 나누어 배분하는 기법

### 멀티프로세싱

 CPU를 여러 개 사용하여 여러 개의 스레드를 동시에 처리

### CPU 멀티스레드

 하드웨어적인 방법(수퍼스칼라)으로 하나의 CPU에서 여러 스레드를 동시에 처리하는 병렬 처리 기법